---
title: "Analysis of Exponential Distribution and Central Limit Theorem"
author: "Kevin E. D'Elia"
date: "February 15, 2016"
output: pdf_document
---

# Overview (Synopsis of Analysis)
The Central Limit Theorem (CLT), and the concept of the sampling distribution, are critical for understanding why statistical inference works.  The CLT says that if you take many repeated samples from a population, then calculate the averages (or sum) of each one, the collection of those averages will be normally distributed.  The purpose of this project is to examine the mean and variance of a sample from the exponential distribution, then produce a sampling distribution of the mean and variance, and finally demonstrate how the sampling distribution is approximately normal.

# Simulations

As with any good simulation, the first step is to set the seed for the random number generators.  This is done so that the results generated by the random number engine will be consistent across all invocations of the code, thus ensuring that the results are reproducible by other interested parties.

```{r}
set.seed(1234)
```

The R code for the simulations will be included in-line with the report for easy verification, along with explanations about what is being accomplished by each R markdown code chunk.

There will be two simulations run.  The first will draw 40 values from the exponential distribution.  The second will perform the first simulation, except that it will be executed 10,000 times and, for each execution, the mean and variance will calculated for the sample and stored in a vector. The idea behind this last point is you keep taking a sample of size **n** from the population, calculate some statistic on it, such as the mean, store that value and repeat the process, using a large number of repetitions and increasing sample sizes.  This results in what is known as a **sampling distribution**.  Note that this report will not alter the sample size.

The exponential distribution can be simulated in R with **rexp(n, lambda)** where $\lambda$ is the *rate* parameter.  The mean of exponential distribution is $\frac{1}{\lambda}$ and the standard deviation is also $\frac{1}{\lambda}$.  A requirement of this report is to set $\lambda$ = 0.2 for all of the simulations.  I chose 10,000 replications because this number is large enough to ensure that the mean of the sampling distribution approaches the mean of the population.

# Sample Mean versus Theoretical Mean:

First step in the analysis is to draw 40 random expontenials, like so:
```{r}
lambda <- 0.2
n <- 40
sample1 <- rexp(n, lambda)
```

For comparison, and as a step in demonstrating the approach, draw a second sample using a new seed:
```{r}
set.seed(9898)
sample2 <- rexp(n, lambda)
```

What do these values look like?
```{r echo=FALSE}
sample1_mean = mean(sample1)
sample2_mean = mean(sample2)
Sample <- c("Sample 1", "Sample 2")
Mean <- c(round(sample1_mean, 2), round(sample2_mean, 2))
theTable <- data.frame(Sample, Mean)
rownames(theTable) <- NULL
knitr::kable(theTable)
```

We can quickly see from the table that there is a difference in values between the mean of two samples.  Graphically, this can be shown as:
```{r echo=4:9}
original_par <- par(no.readonly = TRUE)
par(mfrow=c(2,2))
title <- "40 Random Exponentials"
qqnorm(sample1)
hist(sample1, prob = TRUE, col = "yellow", border = "black", xlab = "", main = title)
abline(v = mean(sample1), col = "royalblue", lwd = 2)
qqnorm(sample2)
hist(sample2, prob = TRUE, col = "yellow", border = "black", xlab = "", main = title)
abline(v = mean(sample2), col = "royalblue", lwd = 2)
par(original_par)
```

Several comments are in order regarding the figures:

1. The histograms are not normally distributed 
2. The Q-Q plots indicate that they do not form a normal distribution
3. The sample mean in both cases is centered around 5 and we will expect this to approximate the theoretical mean

include figures with titles.  In the figures, highlight the means you are comparing.  Include ext that explains the figures and what is shown on them and provides appropriate numbers

Now, what happens when this drawing of a sample of size **n** and subsequent calculation of a sample statistic is done repeatedly?  The sample size remains the same, but the calculation is now done 10,000 times.

Add titles, and text showing the theoretical mean for this distribution
Make sure you show the center of the distribution of the mean of the 40 exponentials and compare it to the theoretical center of the distribution.

Indicate that this is a distribution of the sample means
the distribution appears normal in shape
The balance point, or the "mean of the sample means", should be the text that appears on the graphic and to indicate that appears to be identical to the mean of the distribution from which the samples were drawn.

```{r}
xbar <- NULL
ul <- 10000
for (i in 1:ul) {xbar <- c(xbar, mean(rexp(n, lambda) ) ) }
hist(xbar, probability = TRUE, xlab = "$$\bar{X}$$")
mean(xbar)
abline(v = mean(xbar), col = "royalblue", lwd = 2)
```

```{r}
# Dummy values
theMean = 2.1589
theSd = 3.989388
Statistic <- c("Mean", "Std. Deviation")
Sample <- c(round(theMean, 2), round(theSd, 2))
Theoretical <- c(5.0, 5.0)
theTable <- data.frame(Statistic, Sample, Theoretical)
rownames(theTable) <- NULL
knitr::kable(theTable)
```

# Sample Variance versus Theoretical Variance:  

include figures (output from R) with titles.  Highlight the variances you are comparing.  Include text that explains your understanding of the differences of the variances.

Show how variable the sample is (via variance) and compare it to the theoretical variance of the distribution.

Make sure you show the variance and compare it to the theoretical variance of the distribution.

The document compares the sample variance to the theoretical variance, including a figure (table or graph) with a relevant title.  The document shows the variability of the mean of 40 exponentials, and compares it to the theoretical variance /standard error of the distribution.

# Distribution 

By The Central Limit Theorem, for large n, $\bar{X}$ ~ N($\mu$, $\sigma^2$/n)

via figures and text, explain how one can tell the distribution is approximately normal.
Show that the distribution is approximately normal (How to do this???)
  for point 3, focus on the difference between the distribution of a large collection of random exponentials and the distribution of a large collection of averages of 40 exponentials.

The document describes in figures(s) and text how one can tell whether the distribution is normal.

The document answers the question "Does the distribution of means of 40 exponentials behave as predicted by the Central Limit theorem?"

Document has been proof read and spell-checked